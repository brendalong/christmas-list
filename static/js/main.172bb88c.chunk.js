(this["webpackJsonpnew-journal"]=this["webpackJsonpnew-journal"]||[]).push([[0],{53:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n(2),s=n(27),r=n.n(s),i=(n(53),n(14)),o=n(11),l=n(12),j=n(66),d=n(18),b=(n(54),Object(a.createContext)()),h=function(e){var t=sessionStorage.getItem("userProfile"),n=Object(a.useState)(null!=t),s=Object(l.a)(n,2),r=s[0],i=s[1],o=Object(a.useState)(!1),h=Object(l.a)(o,2),u=h[0],O=h[1],x=new d.a.auth.GoogleAuthProvider;Object(a.useEffect)((function(){d.a.auth().onAuthStateChanged((function(e){O(!0)}))}),[]);return Object(c.jsx)(b.Provider,{value:{isLoggedIn:r,login:function(e,t){return d.a.auth().signInWithEmailAndPassword(e,t).then((function(e){sessionStorage.setItem("userProfile",JSON.stringify(e.user)),i(!0)}))},logout:function(){return d.a.auth().signOut().then((function(){sessionStorage.clear(),i(!1)}))},register:function(e,t){return d.a.auth().createUserWithEmailAndPassword(e.email,t).then((function(e){console.log("savedU",e),sessionStorage.setItem("userProfile",JSON.stringify(e.user)),i(!0)}))},signInWithGoogle:function(){return d.a.auth().signInWithPopup(x).then((function(e){console.log("savedU",e),sessionStorage.setItem("userProfile",JSON.stringify(e.user)),i(!0)}))}},children:u?e.children:Object(c.jsx)(j.a,{className:"app-spinner dark"})})},u=n(67),O=n(68),x=n(45),m=n(71),f=n(69);function g(){var e=Object(o.g)(),t=Object(a.useContext)(b).login,n=Object(a.useContext)(b).signInWithGoogle,s=Object(a.useState)(),r=Object(l.a)(s,2),j=r[0],d=r[1],h=Object(a.useState)(),g=Object(l.a)(h,2),p=g[0],v=g[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(u.a,{fluid:"xl",children:Object(c.jsxs)(O.a,{children:[Object(c.jsxs)(x.a,{className:"m-2",md:6,children:[Object(c.jsx)("h5",{className:"username",children:"Please sign in."}),Object(c.jsx)(m.a,{onSubmit:function(n){n.preventDefault(),t(j,p).then((function(){return e.push("/")})).catch((function(){return alert("Invalid email or password")}))},children:Object(c.jsxs)("fieldset",{children:[Object(c.jsx)(m.a.Group,{controlId:"formBasicEmail",className:"mb-2",children:Object(c.jsx)(m.a.Control,{type:"email",placeholder:"Email Address",onChange:function(e){return d(e.target.value)}})}),Object(c.jsx)(m.a.Group,{controlId:"formBasicPassword",children:Object(c.jsx)(m.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return v(e.target.value)}})}),Object(c.jsx)(f.a,{variant:"primary",type:"submit",children:"Sign In"})]})})]}),Object(c.jsxs)(x.a,{className:"m-2",children:[Object(c.jsx)("h5",{className:"username",children:"Need an account?"}),Object(c.jsx)(i.b,{to:"register",className:"btn btn-block btn-outline-success",children:"Create one with your email"}),Object(c.jsx)(f.a,{block:!0,onClick:function(){n().then((function(t){return e.push("/")}))},variant:"outline-success",children:"Continue with Google"})]})]})})})}function p(){var e=Object(o.g)(),t=Object(a.useContext)(b).register,n=Object(a.useState)(),s=Object(l.a)(n,2),r=s[0],j=s[1],d=Object(a.useState)(),h=Object(l.a)(d,2),g=h[0],p=h[1],v=Object(a.useState)(),I=Object(l.a)(v,2),y=I[0],C=I[1],N=Object(a.useState)(),w=Object(l.a)(N,2),S=w[0],L=w[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(u.a,{fluid:"xl",children:Object(c.jsxs)(O.a,{children:[Object(c.jsx)(x.a,{className:"m-2",md:6,children:Object(c.jsxs)(m.a,{onSubmit:function(n){(n.preventDefault(),y&&y!==S)?alert("Passwords don't match. Do better."):t({name:r,email:g},y).then((function(){return e.push("/")}))},children:[Object(c.jsx)("h5",{className:"username",children:"Create Your Chris-List Account"}),Object(c.jsxs)("fieldset",{children:[Object(c.jsxs)(m.a.Group,{children:[Object(c.jsx)(m.a.Label,{children:"Name"}),Object(c.jsx)(m.a.Control,{placeholder:"User Name",id:"name",type:"text",onChange:function(e){return j(e.target.value)}})]}),Object(c.jsxs)(m.a.Group,{controlId:"email",children:[Object(c.jsx)(m.a.Label,{children:"Email"}),Object(c.jsx)(m.a.Control,{type:"text",placeholder:"name@example.com",onChange:function(e){return p(e.target.value)}}),Object(c.jsx)(m.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(c.jsxs)(m.a.Group,{controlId:"password",children:[Object(c.jsx)(m.a.Label,{children:"Password"}),Object(c.jsx)(m.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return C(e.target.value)}})]}),Object(c.jsxs)(m.a.Group,{controlId:"confirmPassword",children:[Object(c.jsx)(m.a.Label,{children:"Confirm Password"}),Object(c.jsx)(m.a.Control,{type:"password",placeholder:"Confirm password",onChange:function(e){return L(e.target.value)}})]}),Object(c.jsx)(f.a,{variant:"primary",type:"submit",children:"Continue"})]})]})}),Object(c.jsxs)(x.a,{className:"m-2",children:[Object(c.jsx)("h5",{className:"username",children:"Already have an account?"}),Object(c.jsx)(i.b,{to:"/login",className:"btn btn-block btn-outline-success",children:"Sign in"})]})]})})})}var v={apiKey:"AIzaSyCBRUk2LvEfwdOwCbj2E7WwrDNBARaIGKY",authDomain:"christmasjournal-d3efa.firebaseapp.com",databaseURL:"https://christmasjournal-d3efa.firebaseio.com",projectId:"christmasjournal-d3efa",storageBucket:"christmasjournal-d3efa.appspot.com",messagingSenderId:"355617880647",appId:"1:355617880647:web:5c1babbb8fd8f74f0fcf62"};console.log("fb",d.a);var I=v.databaseURL,y=function(e){var t=e.fbid;return delete e.fbid,fetch("".concat(I,"/christList/").concat(t,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},C=n(32),N=n(23),w=n(73),S=function(e){var t=e.item,n=e.bgcolor,s=e.iGotIt,r=e.deleteThisItem,o=Object(a.useState)(!0),j=Object(l.a)(o,2),d=j[0],b=j[1];return Object(a.useEffect)((function(){b(!1)}),[t]),Object(c.jsxs)(w.a,{bg:n,className:"mb-2 text-white",children:[Object(c.jsxs)(w.a.Body,{children:[Object(c.jsx)(w.a.Title,{children:t.title}),Object(c.jsxs)(w.a.Subtitle,{children:["Date added: ",Object(c.jsx)("strong",{children:t.timestamp&&new Date(t.timestamp).toLocaleDateString()})]}),Object(c.jsxs)(w.a.Text,{children:["Description: ",Object(c.jsx)("strong",{children:t.details})]})]}),Object(c.jsxs)(w.a.Body,{className:"text-right",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{id:"cb-".concat(t.fbid),type:"checkbox",className:"mycheck",onChange:function(e){b(!0);var n=Object(N.a)({},t);n.gotIt=!n.gotIt,s(n)},checked:t.gotIt,disabled:d}),Object(c.jsx)("label",{htmlFor:"cb-".concat(t.fbid),children:"I got it!"})]}),Object(c.jsx)("div",{children:Object(c.jsx)(i.b,{className:"btn ouline-lite btn-sm",style:{width:"7.25em"},disabled:d,to:"/chrisItem/edit/".concat(t.fbid),children:"Edit"})}),Object(c.jsx)("div",{children:Object(c.jsx)(f.a,{onClick:function(){b(!0),r(t.fbid)},variant:"outline-lite",size:"sm",style:{width:"7.25em"},disabled:d,children:"Remove"})})]})]})},L=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],r=function(e){y(e).then((function(){o()}))},i=function(e){var t;(t=e,fetch("".concat(I,"/christList/").concat(t,".json"),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.status}))).then((function(e){200===e?o():console.log("oops, error here")}))},o=function(){fetch("".concat(I,'/christList.json/?orderBy="uid"&equalTo="').concat(d.a.auth().currentUser.uid,'"')).then((function(e){return e.json()})).then((function(e){console.log("fb data",e);var t=Object.keys(e).map((function(t,n){return e[t].fbid=t,e[t]}));console.log("arrayWithFBID",t),t.sort((function(e,t){return e.timestamp<t.timestamp?1:-1})),s(t)}))};Object(a.useEffect)((function(){o()}),[]);var j=["Secondary","Success","Danger","Warning","Info"],b=0;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(u.a,{fluid:"xl",children:[Object(c.jsxs)("h5",{className:"username",children:[C.a.auth().currentUser.displayName.split(" ")[0],"'s List"]}),Object(c.jsx)(x.a,{className:"m-2",children:n.map((function(e){var t=function(){var e=j[b];return b<j.length-1?b++:b=0,e.toLowerCase()}();return Object(c.jsx)(S,{item:e,bgcolor:t,iGotIt:r,deleteThisItem:i},e.fbid)}))})]})})},k=function(){var e=Object(a.useState)({}),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(o.g)();return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(u.a,{fluid:"xl",children:Object(c.jsx)(O.a,{children:Object(c.jsxs)(x.a,{className:"m-2",md:6,children:[Object(c.jsx)("h4",{children:"Another One"}),Object(c.jsxs)(m.a,{onChange:function(e){var t=Object(N.a)({},n);t[e.target.id]=e.target.value,s(t)},children:[Object(c.jsxs)(m.a.Group,{controlId:"title",className:"mb-3",children:[Object(c.jsx)(m.a.Label,{children:"Title"}),Object(c.jsx)(m.a.Control,{type:"text",placeholder:"Official Red Ryder carbine-action 200-shot range model air rifle"}),Object(c.jsx)(m.a.Text,{className:"text-muted",children:"For best results, be specific"})]}),Object(c.jsxs)(m.a.Group,{controlId:"details",children:[Object(c.jsx)(m.a.Label,{children:"Details"}),Object(c.jsx)(m.a.Control,{as:"textarea",rows:3,placeholder:"I saw one at Macy's and I promise not to shoot my eye out."})]}),Object(c.jsx)(f.a,{onClick:function(){if(n.title){var e=Object(N.a)({},n);e.uid=C.a.auth().currentUser.uid,e.timestamp=Date.now(),e.gotIt=!1,(t=e,fetch("".concat(I,"/christList.json"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}))).then((function(e){return r.push("/")}))}else alert("Please enter a title");var t},children:"Add To List"})]})]})})})})},P=function(){var e=Object(a.useState)({}),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(o.g)(),i=Object(o.h)().chrisItemId;return Object(a.useEffect)((function(){var e;(e=i,console.log("getone",e),fetch("".concat(I,"/christList/").concat(e,".json")).then((function(e){return e.json()}))).then((function(e){s(e)}))}),[i]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(u.a,{fluid:"xl",children:Object(c.jsx)(O.a,{children:Object(c.jsxs)(x.a,{className:"m-2",md:6,children:[Object(c.jsx)("h4",{children:"Edit This Item"}),Object(c.jsxs)(m.a,{onChange:function(e){var t=Object(N.a)({},n);t[e.target.id]=e.target.value,s(t)},children:[Object(c.jsxs)(m.a.Group,{controlId:"title",className:"mb-3",children:[Object(c.jsx)(m.a.Label,{children:"Title"}),Object(c.jsx)(m.a.Control,{type:"text",value:null===n||void 0===n?void 0:n.title}),Object(c.jsx)(m.a.Text,{className:"text-muted",children:"For best results, be specific"})]}),Object(c.jsxs)(m.a.Group,{controlId:"details",children:[Object(c.jsx)(m.a.Label,{children:"Details"}),Object(c.jsx)(m.a.Control,{as:"textarea",rows:3,value:null===n||void 0===n?void 0:n.details})]}),Object(c.jsx)(f.a,{onClick:function(){if(n.title){var e=Object(N.a)({},n);e.fbid=i,y(e).then((function(e){return r.push("/")}))}else alert("Please enter a title")},children:"Save Changes"})]})]})})})})};function T(){var e=Object(a.useContext)(b).isLoggedIn;return Object(c.jsx)("main",{children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/",exact:!0,children:e?Object(c.jsx)(L,{}):Object(c.jsx)(o.a,{to:"/login"})}),Object(c.jsx)(o.b,{path:"/home",children:e?Object(c.jsx)(L,{}):Object(c.jsx)(o.a,{to:"/login"})}),Object(c.jsx)(o.b,{path:"/list",children:e?Object(c.jsx)(L,{}):Object(c.jsx)(o.a,{to:"/login"})}),Object(c.jsx)(o.b,{path:"/add",children:e?Object(c.jsx)(k,{}):Object(c.jsx)(o.a,{to:"/login"})}),Object(c.jsx)(o.b,{path:"/chrisItem/edit/:chrisItemId",children:e?Object(c.jsx)(P,{}):Object(c.jsx)(o.a,{to:"/login"})}),Object(c.jsx)(o.b,{path:"/login",children:Object(c.jsx)(g,{})}),Object(c.jsx)(o.b,{path:"/register",children:Object(c.jsx)(p,{})})]})})}var E=n(70),G=n(72),A=function(){var e=Object(a.useContext)(b),t=e.isLoggedIn,n=e.logout,s=Object(a.useState)(!1),r=Object(l.a)(s,2),o=r[0],j=r[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(E.a,{bg:"primary",expand:"lg",expanded:o,className:"navbar-dark",children:[Object(c.jsx)(E.a.Brand,{href:"/",children:"All I Want For Christmas"}),Object(c.jsx)(E.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){return j(!o&&"expanded")}}),Object(c.jsx)(E.a.Collapse,{id:"basic-navbar-nav",children:Object(c.jsxs)(G.a,{className:"ml-auto navbar-nav ",activeKey:"/home",onClick:function(){return j(!1)},children:[t&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(G.a.Item,{className:"text-right",children:Object(c.jsx)(i.c,{className:"nav-link",to:"/home",children:"Home"})}),Object(c.jsx)(G.a.Item,{className:"text-right",children:Object(c.jsx)(i.c,{className:"nav-link",to:"/list",children:"My List"})}),Object(c.jsx)(G.a.Item,{className:"text-right",children:Object(c.jsx)(i.c,{className:"nav-link",to:"/add",children:"Add One"})}),Object(c.jsx)(f.a,{className:"nav-link text-right",variant:"link",onClick:n,style:{border:"0"},children:"Logout"})]}),!t&&Object(c.jsx)(G.a.Item,{children:Object(c.jsx)(i.c,{className:"nav-link",to:"/login",children:"Login to make your list"})})]})})]})})};var D=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(i.a,{children:Object(c.jsxs)(h,{children:[Object(c.jsx)(A,{}),Object(c.jsx)(T,{})]})})})};n(63);d.a.initializeApp(v),r.a.render(Object(c.jsx)(D,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.172bb88c.chunk.js.map